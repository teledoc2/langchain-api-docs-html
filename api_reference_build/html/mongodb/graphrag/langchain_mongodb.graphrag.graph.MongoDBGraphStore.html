
<!DOCTYPE html>

<html data-content_root="../../" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9B66JQQH2F"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-9B66JQQH2F');
    </script>
<title>MongoDBGraphStore ‚Äî ü¶úüîó LangChain  documentation</title>
<script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
<!--
    this give us a css class that will be invisible only if js is disabled
  -->
<noscript>
<style>
      .pst-js-only { display: none !important; }

    </style>
</noscript>
<!-- Loaded before other Sphinx assets -->
<link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet"/>
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet"/>
<link href="../../_static/pygments.css?v=8f2a1f02" rel="stylesheet" type="text/css"/>
<link href="../../_static/autodoc_pydantic.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../../_static/sphinx-design.min.css?v=95c83b7e" rel="stylesheet" type="text/css"/>
<link href="../../_static/css/custom.css?v=8e9fa5b3" rel="stylesheet" type="text/css"/>
<!-- So that users can add custom icons -->
<script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
<!-- Pre-loaded scripts that we'll load fully later -->
<link as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" rel="preload"/>
<link as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" rel="preload"/>
<script src="../../_static/documentation_options.js?v=3b5cce75"></script>
<script src="../../_static/doctools.js?v=9bcbadda"></script>
<script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
<script src="../../_static/copybutton.js?v=f281be69"></script>
<script src="../../_static/design-tabs.js?v=f930bc37"></script>
<script>DOCUMENTATION_OPTIONS.pagename = 'mongodb/graphrag/langchain_mongodb.graphrag.graph.MongoDBGraphStore';</script>
<link href="../../_static/favicon.png" rel="icon"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="../indexes.html" rel="next" title="indexes"/>
<link href="../graphrag.html" rel="prev" title="graphrag"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
<meta content="" name="docsearch:version"/>
<meta content="Mar 06, 2025" name="docbuild:last-update"/>
</head>
<body data-bs-root-margin="0px 0px -60%" data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-default-mode="" data-offset="180">
<div class="skip-link d-print-none" id="pst-skip-link"><a href="#main-content">Skip to main content</a></div>
<div id="pst-scroll-pixel-helper"></div>
<button class="btn rounded-pill" id="pst-back-to-top" type="button">
<i class="fa-solid fa-arrow-up"></i>Back to top</button>
<dialog id="pst-search-dialog">
<form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" name="q" placeholder="Search" spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</dialog>
<div class="pst-async-banner-revealer d-none">
<aside aria-label="Version warning" class="d-none d-print-none" id="bd-header-version-warning"></aside>
</div>
<header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
<button aria-label="Site navigation" class="pst-navbar-icon sidebar-toggle primary-toggle">
<span class="fa-solid fa-bars"></span>
</button>
<div class="navbar-header-items__start">
<div class="navbar-item">
<a class="navbar-brand logo" href="../../index.html">
<img alt="ü¶úüîó LangChain  documentation - Home" class="logo__image only-light" src="../../_static/wordmark-api.svg"/>
<img alt="ü¶úüîó LangChain  documentation - Home" class="logo__image only-dark pst-js-only" src="../../_static/wordmark-api-dark.svg"/>
</a></div>
</div>
<div class="navbar-header-items">
<div class="me-auto navbar-header-items__center">
<div class="navbar-item">
<nav>
<ul class="bd-navbar-elements navbar-nav">
<li class="nav-item current active">
<a class="nav-link nav-internal" href="../../reference.html">
    Reference
  </a>
</li>
</ul>
</nav></div>
</div>
<div class="navbar-header-items__end">
<div class="navbar-item navbar-persistent--container">
<form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" name="q" placeholder="Search" spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</div>
<div class="navbar-item"><!-- This will display a link to LangChain docs -->
<head>
<style>
        .text-link {
            text-decoration: none; /* Remove underline */
            color: inherit;        /* Inherit color from parent element */
        }
    </style>
</head>
<body>
<a class="text-link" href="https://python.langchain.com/">Docs</a>
</body></div>
<div class="navbar-item">
<button aria-label="Color mode" class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" data-bs-placement="bottom" data-bs-title="Color mode" data-bs-toggle="tooltip">
<i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light" title="Light"></i>
<i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark" title="Dark"></i>
<i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto" title="System Settings"></i>
</button></div>
<div class="navbar-item"><ul aria-label="Quick Links" class="navbar-icon-links">
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://github.com/langchain-ai/langchain" rel="noopener" target="_blank" title="GitHub"><i aria-hidden="true" class="fa-brands fa-square-github fa-lg"></i>
<span class="sr-only">GitHub</span></a>
</li>
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://twitter.com/langchainai" rel="noopener" target="_blank" title="X / Twitter"><i aria-hidden="true" class="fab fa-twitter-square fa-lg"></i>
<span class="sr-only">X / Twitter</span></a>
</li>
</ul></div>
</div>
</div>
<div class="navbar-persistent--mobile">
<form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" name="q" placeholder="Search" spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</div>
<button aria-label="On this page" class="pst-navbar-icon sidebar-toggle secondary-toggle">
<span class="fa-solid fa-outdent"></span>
</button>
</div>
</header>
<div class="bd-container">
<div class="bd-container__inner bd-page-width">
<dialog id="pst-primary-sidebar-modal"></dialog>
<div class="bd-sidebar-primary bd-sidebar" id="pst-primary-sidebar">
<div class="sidebar-header-items sidebar-primary__section">
<div class="sidebar-header-items__center">
<div class="navbar-item">
<nav>
<ul class="bd-navbar-elements navbar-nav">
<li class="nav-item current active">
<a class="nav-link nav-internal" href="../../reference.html">
    Reference
  </a>
</li>
</ul>
</nav></div>
</div>
<div class="sidebar-header-items__end">
<div class="navbar-item"><!-- This will display a link to LangChain docs -->
<head>
<style>
        .text-link {
            text-decoration: none; /* Remove underline */
            color: inherit;        /* Inherit color from parent element */
        }
    </style>
</head>
<body>
<a class="text-link" href="https://python.langchain.com/">Docs</a>
</body></div>
<div class="navbar-item">
<button aria-label="Color mode" class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" data-bs-placement="bottom" data-bs-title="Color mode" data-bs-toggle="tooltip">
<i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light" title="Light"></i>
<i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark" title="Dark"></i>
<i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto" title="System Settings"></i>
</button></div>
<div class="navbar-item"><ul aria-label="Quick Links" class="navbar-icon-links">
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://github.com/langchain-ai/langchain" rel="noopener" target="_blank" title="GitHub"><i aria-hidden="true" class="fa-brands fa-square-github fa-lg"></i>
<span class="sr-only">GitHub</span></a>
</li>
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://twitter.com/langchainai" rel="noopener" target="_blank" title="X / Twitter"><i aria-hidden="true" class="fab fa-twitter-square fa-lg"></i>
<span class="sr-only">X / Twitter</span></a>
</li>
</ul></div>
</div>
</div>
<div class="sidebar-primary-items__start sidebar-primary__section">
<div class="sidebar-primary-item">
<nav aria-label="Section Navigation" class="bd-docs-nav bd-links">
<p aria-level="1" class="bd-links__title" role="heading">Section Navigation</p>
<div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Base packages</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../core/index.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../langchain/index.html">Langchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../text_splitters/index.html">Text Splitters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../experimental/index.html">Experimental</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ai21/index.html">AI21</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../anthropic/index.html">Anthropic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../astradb/index.html">AstraDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aws/index.html">AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../azure_ai/index.html">Azure Ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../azure_dynamic_sessions/index.html">Azure Dynamic Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cerebras/index.html">Cerebras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/index.html">Chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cohere/index.html">Cohere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deepseek/index.html">Deepseek</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../elasticsearch/index.html">Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../exa/index.html">Exa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fireworks/index.html">Fireworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google_community/index.html">Google Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google_genai/index.html">Google GenAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google_vertexai/index.html">Google VertexAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../groq/index.html">Groq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../huggingface/index.html">Huggingface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ibm/index.html">IBM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../milvus/index.html">Milvus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mistralai/index.html">MistralAI</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">MongoDB</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cache.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cache</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../chat_message_histories.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">chat_message_histories</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../docstores.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">docstores</span></code></a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../graphrag.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphrag</span></code></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">MongoDBGraphStore</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../indexes.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">indexes</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../loaders.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipelines.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pipelines</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../retrievers.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">retrievers</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utils</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../vectorstores.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vectorstores</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../neo4j/index.html">Neo4J</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nomic/index.html">Nomic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nvidia_ai_endpoints/index.html">Nvidia Ai Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ollama/index.html">Ollama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openai/index.html">OpenAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pinecone/index.html">Pinecone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../postgres/index.html">Postgres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../prompty/index.html">Prompty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qdrant/index.html">Qdrant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../redis/index.html">Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sema4/index.html">Sema4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../snowflake/index.html">Snowflake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlserver/index.html">Sqlserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../standard_tests/index.html">Standard Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../together/index.html">Together</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unstructured/index.html">Unstructured</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upstage/index.html">Upstage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../voyageai/index.html">VoyageAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../weaviate/index.html">Weaviate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xai/index.html">XAI</a></li>
</ul>
</div>
</nav></div>
</div>
<div class="sidebar-primary-items__end sidebar-primary__section">
<div class="sidebar-primary-item">
<div class="flat" data-ea-manual="true" data-ea-publisher="readthedocs" data-ea-type="readthedocs-sidebar" id="ethical-ad-placement">
</div></div>
</div>
</div>
<main class="bd-main" id="main-content" role="main">
<div class="bd-content">
<div class="bd-article-container">
<div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
<div class="header-article-items__start">
<div class="header-article-item">
<nav aria-label="Breadcrumb" class="d-print-none">
<ul class="bd-breadcrumbs">
<li class="breadcrumb-item breadcrumb-home">
<a aria-label="Home" class="nav-link" href="../../index.html">
<i class="fa-solid fa-home"></i>
</a>
</li>
<li class="breadcrumb-item"><a class="nav-link" href="../../reference.html">LangChain Python API Reference</a></li>
<li class="breadcrumb-item"><a class="nav-link" href="../index.html">langchain-mongodb: 0.5.0</a></li>
<li class="breadcrumb-item"><a class="nav-link" href="../graphrag.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphrag</span></code></a></li>
<li aria-current="page" class="breadcrumb-item active"><span class="ellipsis">MongoDBGraphStore</span></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id="searchbox"></div>
<article class="bd-article">
<section id="mongodbgraphstore">
<h1>MongoDBGraphStore<a class="headerlink" href="#mongodbgraphstore" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_mongodb.graphrag.graph.</span></span><span class="sig-name descname"><span class="pre">MongoDBGraphStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Collection</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_extraction_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><span class="pre">BaseChatModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_entity_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_relationship_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_name_examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'warn'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore" title="Link to this definition">#</a></dt>
<dd><p>GraphRAG DataStore</p>
<p>GraphRAG is a ChatModel that provides responses to semantic queries
based on a Knowledge Graph that an LLM is used to create.
As in Vector RAG, we augment the Chat Model‚Äôs training data
with relevant information that we collect from documents.</p>
<p>In Vector RAG, one uses an ‚ÄúEmbedding‚Äù model that converts both
the query, and the potentially relevant documents, into vectors,
which can then be compared, and the most similar supplied to the
Chat Model as context to the query.</p>
<p>In Graph RAG, one uses an ‚ÄúEntity-Extraction‚Äù model that converts
text into Entities and their relationships, a Knowledge Graph.
Comparison is done by Graph traversal, finding entities connected
to the query prompts. These are then supplied to the Chat Model as context.
The main difference is that GraphRAG‚Äôs output is typically in a structured format.</p>
<p>GraphRAG excels in finding links and common entities,
even if these come from different articles. It can combine information from
distinct sources providing richer context than Vector RAG in certain cases.</p>
<p>Here are a few examples of so-called multi-hop questions where GraphRAG excels:
- What is the connection between ACME Corporation and GreenTech Ltd.?
- Who is leading the SolarGrid Initiative, and what is their role?
- Which organizations are participating in the SolarGrid Initiative?
- What is John Doe‚Äôs role in ACME‚Äôs renewable energy projects?
- Which company is headquartered in San Francisco and involved in the SolarGrid Initiative?</p>
<p>In Graph RAG, one uses an Entity-Extraction model that interprets
text documents that it is given and extracting the query,
and the potentially relevant documents, into graphs. These are
composed of nodes that are entities (nouns) and edges that are relationships.
The idea is that the graph can find connections between entities and
hence answer questions that require more than one connection.</p>
<p>In MongoDB, Knowledge Graphs are stored in a single Collection.
Each MongoDB Document represents a single entity (node),
and it relationships (edges) are defined in a nested field named
‚Äúrelationships‚Äù. The schema, and an example, are described in the
<code class="xref py py-data docutils literal notranslate"><span class="pre">entity_context</span></code> prompts module.</p>
<p>When a query is made, the model extracts the entities in it,
then traverses the graph to find connections.
The closest entities and their relationships form the context
that is included with the query to the Chat Model.</p>
<p>Consider this example Query: ‚ÄúDoes John Doe work at MongoDB?‚Äù
GraphRAG can answer this question even if the following two statements come
from completely different sources.
- ‚ÄúJane Smith works with John Doe.‚Äù
- ‚ÄúJane Smith works at MongoDB.‚Äù</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_string</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) ‚Äì A valid MongoDB connection URI.</p></li>
<li><p><strong>database_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) ‚Äì The name of the database to connect to.</p></li>
<li><p><strong>collection_name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) ‚Äì The name of the collection to connect to.</p></li>
<li><p><strong>collection</strong> (<em>Optional</em><em>[</em><em>Collection</em><em>]</em>) ‚Äì A Collection that will represent a Knowledge Graph.
** One may pass a Collection in lieu of connection_string, database_name, and collection_name.</p></li>
<li><p><strong>entity_extraction_model</strong> (<a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><em>BaseChatModel</em></a>) ‚Äì LLM for converting documents into Graph of Entities and Relationships.</p></li>
<li><p><strong>entity_prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Prompt to fill graph store with entities following schema.
Defaults to .prompts.ENTITY_EXTRACTION_INSTRUCTIONS</p></li>
<li><p><strong>query_prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Prompt extracts entities and relationships as search starting points.
Defaults to .prompts.NAME_EXTRACTION_INSTRUCTIONS</p></li>
<li><p><strong>max_depth</strong> (<em>int</em>) ‚Äì Maximum recursion depth in graph traversal.</p></li>
<li><p><strong>allowed_entity_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì If provided, constrains search to these types.</p></li>
<li><p><strong>allowed_relationship_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì If provided, constrains search to these types.</p></li>
<li><p><strong>entity_examples</strong> (<em>str</em>) ‚Äì A string containing any number of additional examples to provide as context for entity extraction.</p></li>
<li><p><strong>entity_name_examples</strong> (<em>str</em>) ‚Äì A string appended to prompts.NAME_EXTRACTION_INSTRUCTIONS containing examples.</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) ‚Äì If True, entity schema will be validated on every insert or update.</p></li>
<li><p><strong>validation_action</strong> (<em>str</em>) ‚Äì One of {‚Äúwarn‚Äù, ‚Äúerror‚Äù}.
- If ‚Äúwarn‚Äù, the default, documents will be inserted but errors logged.
- If ‚Äúerror‚Äù, an exception will be raised if any document does not match the schema.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Attributes</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">entity_schema</span></code></p></td>
<td><p>JSON Schema Object of Entities.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.__init__" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(*[,¬†connection_string,¬†...])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.add_documents" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.add_documents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_documents</span></code></a>(documents)</p></td>
<td><p>Extract entities and upsert into the collection.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.chat_response" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.chat_response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">chat_response</span></code></a>(query[,¬†chat_model,¬†prompt])</p></td>
<td><p>Responds to a query given information found in Knowledge Graph.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entities" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_entities</span></code></a>(raw_document,¬†**kwargs)</p></td>
<td><p>Extract entities and their relations using chosen prompt and LLM.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entity_names" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entity_names"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_entity_names</span></code></a>(raw_document,¬†**kwargs)</p></td>
<td><p>Extract entity names from a document for similarity_search.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.find_entity_by_name" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.find_entity_by_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">find_entity_by_name</span></code></a>(name)</p></td>
<td><p>Utility to get Entity dict from Knowledge Graph / Collection.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.from_connection_string" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.from_connection_string"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_connection_string</span></code></a>(connection_string,¬†...)</p></td>
<td><p>Construct a <cite>MongoDB KnowLedge Graph for RAG</cite> from a MongoDB connection URI.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.related_entities" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.related_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">related_entities</span></code></a>(starting_entities[,¬†max_depth])</p></td>
<td><p>Traverse Graph along relationship edges to find connected entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.similarity_search" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore.similarity_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search</span></code></a>(input_document)</p></td>
<td><p>Retrieve list of connected Entities found via traversal of KnowledgeGraph.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Collection</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_extraction_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><span class="pre">BaseChatModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_entity_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_relationship_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_name_examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'warn'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.__init__" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_string</strong> (<em>str</em><em> | </em><em>None</em>) ‚Äì A valid MongoDB connection URI.</p></li>
<li><p><strong>database_name</strong> (<em>str</em><em> | </em><em>None</em>) ‚Äì The name of the database to connect to.</p></li>
<li><p><strong>collection_name</strong> (<em>str</em><em> | </em><em>None</em>) ‚Äì The name of the collection to connect to.</p></li>
<li><p><strong>collection</strong> (<em>Collection</em><em> | </em><em>None</em>) ‚Äì A Collection that will represent a Knowledge Graph.
** One may pass a Collection in lieu of connection_string, database_name, and collection_name.</p></li>
<li><p><strong>entity_extraction_model</strong> (<a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><em>BaseChatModel</em></a>) ‚Äì LLM for converting documents into Graph of Entities and Relationships.</p></li>
<li><p><strong>entity_prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Prompt to fill graph store with entities following schema.
Defaults to .prompts.ENTITY_EXTRACTION_INSTRUCTIONS</p></li>
<li><p><strong>query_prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Prompt extracts entities and relationships as search starting points.
Defaults to .prompts.NAME_EXTRACTION_INSTRUCTIONS</p></li>
<li><p><strong>max_depth</strong> (<em>int</em>) ‚Äì Maximum recursion depth in graph traversal.</p></li>
<li><p><strong>allowed_entity_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì If provided, constrains search to these types.</p></li>
<li><p><strong>allowed_relationship_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì If provided, constrains search to these types.</p></li>
<li><p><strong>entity_examples</strong> (<em>str</em>) ‚Äì A string containing any number of additional examples to provide as context for entity extraction.</p></li>
<li><p><strong>entity_name_examples</strong> (<em>str</em>) ‚Äì A string appended to prompts.NAME_EXTRACTION_INSTRUCTIONS containing examples.</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) ‚Äì If True, entity schema will be validated on every insert or update.</p></li>
<li><p><strong>validation_action</strong> (<em>str</em>) ‚Äì One of {‚Äúwarn‚Äù, ‚Äúerror‚Äù}.
- If ‚Äúwarn‚Äù, the default, documents will be inserted but errors logged.
- If ‚Äúerror‚Äù, an exception will be raised if any document does not match the schema.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.add_documents">
<span class="sig-name descname"><span class="pre">add_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">BulkWriteResult</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.add_documents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.add_documents" title="Link to this definition">#</a></dt>
<dd><p>Extract entities and upsert into the collection.</p>
<p>Each entity is represented by a single MongoDB Document.
Existing entities identified in documents will be updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>documents</strong> (<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a><em> | </em><em>List</em><em>[</em><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a><em>]</em>) ‚Äì list of textual documents and associated metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List containing metadata on entities inserted and updated, one value for each input document.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[<em>BulkWriteResult</em>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.chat_response">
<span class="sig-name descname"><span class="pre">chat_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><span class="pre">BaseChatModel</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/messages/langchain_core.messages.ai.AIMessage.html#langchain_core.messages.ai.AIMessage" title="langchain_core.messages.ai.AIMessage"><span class="pre">AIMessage</span></a></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.chat_response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.chat_response" title="Link to this definition">#</a></dt>
<dd><p>Responds to a query given information found in Knowledge Graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) ‚Äì Prompt before it is augmented by Knowledge Graph.</p></li>
<li><p><strong>chat_model</strong> (<a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><em>BaseChatModel</em></a>) ‚Äì ChatBot. Defaults to entity_extraction_model.</p></li>
<li><p><strong>prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Alternative Prompt Template. Defaults to prompts.rag_prompt.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Response Message. response.content contains text.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../../core/messages/langchain_core.messages.ai.AIMessage.html#langchain_core.messages.ai.AIMessage" title="langchain_core.messages.ai.AIMessage"><em>AIMessage</em></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entities">
<span class="sig-name descname"><span class="pre">extract_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Entity</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.extract_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entities" title="Link to this definition">#</a></dt>
<dd><p>Extract entities and their relations using chosen prompt and LLM.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_document</strong> (<em>str</em>) ‚Äì A single text document as a string. Typically prose.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Entity dictionaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Entity]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entity_names">
<span class="sig-name descname"><span class="pre">extract_entity_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.extract_entity_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entity_names" title="Link to this definition">#</a></dt>
<dd><p>Extract entity names from a document for similarity_search.</p>
<p>The second entity extraction has a different form and purpose than
the first as we are looking for starting points of our search and
paths to follow. We aim to find source nodes,  but no target nodes or edges.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raw_document</strong> (<em>str</em>) ‚Äì A single text document as a string. Typically prose.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of entity names / _ids.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.find_entity_by_name">
<span class="sig-name descname"><span class="pre">find_entity_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><span class="pre">Entity</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.find_entity_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.find_entity_by_name" title="Link to this definition">#</a></dt>
<dd><p>Utility to get Entity dict from Knowledge Graph / Collection.
:param name: _id string to look for.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of Entity dicts if any match name.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>name</strong> (<em>str</em>)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[Entity]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.from_connection_string">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_connection_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_extraction_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><span class="pre">BaseChatModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ChatPromptTemplate(input_variables=['allowed_entity_types',</span> <span class="pre">'allowed_relationship_types',</span> <span class="pre">'entity_schema',</span> <span class="pre">'input_document'],</span> <span class="pre">input_types={},</span> <span class="pre">partial_variables={},</span> <span class="pre">messages=[SystemMessagePromptTemplate(prompt=PromptTemplate(input_variables=['allowed_entity_types',</span> <span class="pre">'allowed_relationship_types',</span> <span class="pre">'entity_schema'],</span> <span class="pre">input_types={},</span> <span class="pre">partial_variables={},</span> <span class="pre">template='\n##</span> <span class="pre">Overview\nYou</span> <span class="pre">are</span> <span class="pre">a</span> <span class="pre">meticulous</span> <span class="pre">analyst</span> <span class="pre">tasked</span> <span class="pre">with</span> <span class="pre">extracting</span> <span class="pre">information</span> <span class="pre">from</span> <span class="pre">unstructured</span> <span class="pre">text\nto</span> <span class="pre">build</span> <span class="pre">a</span> <span class="pre">knowledge</span> <span class="pre">graph</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">structured</span> <span class="pre">json</span> <span class="pre">format</span> <span class="pre">of</span> <span class="pre">entities</span> <span class="pre">(nodes)</span> <span class="pre">and</span> <span class="pre">their</span> <span class="pre">relationships</span> <span class="pre">(edges).\nThe</span> <span class="pre">graph</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">stored</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">MongoDB</span> <span class="pre">Collection</span> <span class="pre">and</span> <span class="pre">traversed</span> <span class="pre">using</span> <span class="pre">$graphLookup\nfrom</span> <span class="pre">starting</span> <span class="pre">points</span> <span class="pre">of</span> <span class="pre">entity</span> <span class="pre">nodes</span> <span class="pre">matching</span> <span class="pre">names</span> <span class="pre">found</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">query,</span> <span class="pre">and</span> <span class="pre">follow</span> <span class="pre">their</span> <span class="pre">relationships.\n\nUse</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">as</span> <span class="pre">guidelines.\n\n-</span> <span class="pre">Simplicity:</span> <span class="pre">The</span> <span class="pre">graph</span> <span class="pre">should</span> <span class="pre">have</span> <span class="pre">as</span> <span class="pre">few</span> <span class="pre">entities</span> <span class="pre">and</span> <span class="pre">relationship</span> <span class="pre">types</span> <span class="pre">as</span> <span class="pre">needed</span> <span class="pre">to</span> <span class="pre">convey</span> <span class="pre">the</span> <span class="pre">information</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">input.\n-</span> <span class="pre">Consistency:</span> <span class="pre">Connections</span> <span class="pre">can</span> <span class="pre">only</span> <span class="pre">be</span> <span class="pre">made</span> <span class="pre">if</span> <span class="pre">entities</span> <span class="pre">and</span> <span class="pre">relationships</span> <span class="pre">use</span> <span class="pre">consistent</span> <span class="pre">naming.\n-</span> <span class="pre">Generality:</span> <span class="pre">The</span> <span class="pre">graph</span> <span class="pre">should</span> <span class="pre">be</span> <span class="pre">useful</span> <span class="pre">for</span> <span class="pre">describing</span> <span class="pre">the</span> <span class="pre">concepts</span> <span class="pre">in</span> <span class="pre">not</span> <span class="pre">just</span> <span class="pre">this</span> <span class="pre">document</span> <span class="pre">but</span> <span class="pre">other</span> <span class="pre">similar</span> <span class="pre">documents.\n-</span> <span class="pre">Accuracy:</span> <span class="pre">Do</span> <span class="pre">not</span> <span class="pre">add</span> <span class="pre">any</span> <span class="pre">information</span> <span class="pre">that</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">explicitly</span> <span class="pre">mentioned</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">text.\n\nINPUT:</span> <span class="pre">You</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">provided</span> <span class="pre">a</span> <span class="pre">text</span> <span class="pre">document.\nOUTPUT:\n-</span> <span class="pre">You</span> <span class="pre">will</span> <span class="pre">produce</span> <span class="pre">valid</span> <span class="pre">json</span> <span class="pre">according</span> <span class="pre">the</span> <span class="pre">"Output</span> <span class="pre">Schema"</span> <span class="pre">section</span> <span class="pre">below.\n-</span> <span class="pre">Your</span> <span class="pre">response</span> <span class="pre">**must</span> <span class="pre">be**</span> <span class="pre">a</span> <span class="pre">**valid</span> <span class="pre">JSON</span> <span class="pre">document**</span> <span class="pre">with</span> <span class="pre">NO</span> <span class="pre">extra</span> <span class="pre">text,</span> <span class="pre">explanations,</span> <span class="pre">or</span> <span class="pre">markdown</span> <span class="pre">formatting.\n-</span> <span class="pre">The</span> <span class="pre">extracted</span> <span class="pre">entities</span> <span class="pre">and</span> <span class="pre">relationships</span> <span class="pre">**MUST</span> <span class="pre">STRICTLY</span> <span class="pre">CONFORM**</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">constraints</span> <span class="pre">outlined</span> <span class="pre">below.\n-</span> <span class="pre">Any</span> <span class="pre">entities</span> <span class="pre">or</span> <span class="pre">relationships</span> <span class="pre">not</span> <span class="pre">matching</span> <span class="pre">the</span> <span class="pre">allowed</span> <span class="pre">types</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">**EXCLUDED**.\n\n\n##</span> <span class="pre">Entities\nAn</span> <span class="pre">entity</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">knowledge</span> <span class="pre">graph</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">uniquely</span> <span class="pre">identifiable</span> <span class="pre">object</span> <span class="pre">or</span> <span class="pre">concept\n(such</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">person,</span> <span class="pre">organization,</span> <span class="pre">location,</span> <span class="pre">object,</span> <span class="pre">or</span> <span class="pre">event),\nrepresented</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">node</span> <span class="pre">with</span> <span class="pre">attributes</span> <span class="pre">(properties)</span> <span class="pre">and</span> <span class="pre">relationships</span> <span class="pre">to</span> <span class="pre">other</span> <span class="pre">entities.\n\nUse</span> <span class="pre">the</span> <span class="pre">reserved</span> <span class="pre">field</span> <span class="pre">name</span> <span class="pre">`_id`</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">name.</span> <span class="pre">It</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">a</span> <span class="pre">unique</span> <span class="pre">primary</span> <span class="pre">key,\nand</span> <span class="pre">MongoDB</span> <span class="pre">automatically</span> <span class="pre">creates</span> <span class="pre">an</span> <span class="pre">index</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">`_id`</span> <span class="pre">field.\n\nMaintain</span> <span class="pre">Entity</span> <span class="pre">Consistency</span> <span class="pre">when</span> <span class="pre">extracting</span> <span class="pre">entities.</span> <span class="pre">If</span> <span class="pre">an</span> <span class="pre">entity,</span> <span class="pre">such</span> <span class="pre">as</span> <span class="pre">"John</span> <span class="pre">Doe",\nis</span> <span class="pre">mentioned</span> <span class="pre">multiple</span> <span class="pre">times</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">text</span> <span class="pre">but</span> <span class="pre">is</span> <span class="pre">referred</span> <span class="pre">to</span> <span class="pre">by</span> <span class="pre">different</span> <span class="pre">names</span> <span class="pre">or</span> <span class="pre">pronouns</span> <span class="pre">(e.g.,</span> <span class="pre">"John",</span> <span class="pre">"Mr</span> <span class="pre">Doe",</span> <span class="pre">"he"),\nalways</span> <span class="pre">use</span> <span class="pre">the</span> <span class="pre">most</span> <span class="pre">complete</span> <span class="pre">identifier</span> <span class="pre">for</span> <span class="pre">that</span> <span class="pre">entity</span> <span class="pre">throughout</span> <span class="pre">the</span> <span class="pre">knowledge</span> <span class="pre">graph.\nIn</span> <span class="pre">this</span> <span class="pre">example,</span> <span class="pre">use</span> <span class="pre">"John</span> <span class="pre">Doe"</span> <span class="pre">as</span> <span class="pre">the</span> <span class="pre">entity</span> <span class="pre">`_id.`\n\n**Allowed</span> <span class="pre">Entity</span> <span class="pre">Types**:\n-</span> <span class="pre">Extract</span> <span class="pre">ONLY</span> <span class="pre">entities</span> <span class="pre">whose</span> <span class="pre">`type`</span> <span class="pre">matches</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">following:</span> <span class="pre">{allowed_entity_types}.\n-</span> <span class="pre">NOTE:</span> <span class="pre">If</span> <span class="pre">this</span> <span class="pre">list</span> <span class="pre">is</span> <span class="pre">empty,</span> <span class="pre">ANY</span> <span class="pre">`type`</span> <span class="pre">is</span> <span class="pre">permitted.\n\n###</span> <span class="pre">Examples</span> <span class="pre">of</span> <span class="pre">Exclusions:\n-</span> <span class="pre">If</span> <span class="pre">`allowed_entity_types`</span> <span class="pre">is</span> <span class="pre">`["Person",</span> <span class="pre">"Organization"]`,</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">text</span> <span class="pre">mentions</span> <span class="pre">"Event"</span> <span class="pre">or</span> <span class="pre">"Location",\n</span>¬† <span class="pre">these</span> <span class="pre">entities</span> <span class="pre">must</span> <span class="pre">**NOT**</span> <span class="pre">be</span> <span class="pre">included</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">output.\n\n##</span> <span class="pre">Relationships\nRelationships</span> <span class="pre">represent</span> <span class="pre">edges</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">knowledge</span> <span class="pre">graph.</span> <span class="pre">Relationships</span> <span class="pre">describe</span> <span class="pre">a</span> <span class="pre">specific</span> <span class="pre">edge</span> <span class="pre">type.\nRelationships</span> <span class="pre">MUST</span> <span class="pre">include</span> <span class="pre">a</span> <span class="pre">target</span> <span class="pre">entity,</span> <span class="pre">but</span> <span class="pre">Entities</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">extracted</span> <span class="pre">that</span> <span class="pre">DO</span> <span class="pre">NOT</span> <span class="pre">have</span> <span class="pre">relationships!\nEnsure</span> <span class="pre">consistency</span> <span class="pre">and</span> <span class="pre">generality</span> <span class="pre">in</span> <span class="pre">relationship</span> <span class="pre">names</span> <span class="pre">when</span> <span class="pre">constructing</span> <span class="pre">knowledge</span> <span class="pre">schemas.\nInstead</span> <span class="pre">of</span> <span class="pre">using</span> <span class="pre">specific</span> <span class="pre">and</span> <span class="pre">momentary</span> <span class="pre">types</span> <span class="pre">such</span> <span class="pre">as</span> <span class="pre">\'worked_at\',</span> <span class="pre">use</span> <span class="pre">more</span> <span class="pre">general</span> <span class="pre">and</span> <span class="pre">timeless</span> <span class="pre">relationship</span> <span class="pre">types\nlike</span> <span class="pre">\'employee\'.</span> <span class="pre">Add</span> <span class="pre">details</span> <span class="pre">as</span> <span class="pre">attributes.</span> <span class="pre">Make</span> <span class="pre">sure</span> <span class="pre">to</span> <span class="pre">use</span> <span class="pre">general</span> <span class="pre">and</span> <span class="pre">timeless</span> <span class="pre">relationship</span> <span class="pre">types!\n\n**Allowed</span> <span class="pre">Relationship</span> <span class="pre">Types**:\n-</span> <span class="pre">Extract</span> <span class="pre">ONLY</span> <span class="pre">relationships</span> <span class="pre">whose</span> <span class="pre">`type`</span> <span class="pre">matches</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">following:</span> <span class="pre">{allowed_relationship_types}.\n-</span> <span class="pre">If</span> <span class="pre">this</span> <span class="pre">list</span> <span class="pre">is</span> <span class="pre">empty,</span> <span class="pre">ANY</span> <span class="pre">relationship</span> <span class="pre">type</span> <span class="pre">is</span> <span class="pre">permitted.\n-</span> <span class="pre">Map</span> <span class="pre">synonymous</span> <span class="pre">or</span> <span class="pre">related</span> <span class="pre">terms</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">closest</span> <span class="pre">matching</span> <span class="pre">allowed</span> <span class="pre">type.</span> <span class="pre">For</span> <span class="pre">example:\n\t-\t‚Äúworks</span> <span class="pre">for‚Äù</span> <span class="pre">or</span> <span class="pre">‚Äúemployed</span> <span class="pre">by‚Äù</span> <span class="pre">‚Üí</span> <span class="pre">employee\n\t-\t‚Äúmanages‚Äù</span> <span class="pre">or</span> <span class="pre">‚Äúsupervises‚Äù</span> <span class="pre">‚Üí</span> <span class="pre">manager\n-</span> <span class="pre">If</span> <span class="pre">a</span> <span class="pre">relationship</span> <span class="pre">cannot</span> <span class="pre">be</span> <span class="pre">named</span> <span class="pre">with</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">allowed</span> <span class="pre">keys,</span> <span class="pre">**DO</span> <span class="pre">NOT</span> <span class="pre">include</span> <span class="pre">it**.\n-</span> <span class="pre">An</span> <span class="pre">entity</span> <span class="pre">need</span> <span class="pre">not</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">relationships</span> <span class="pre">object</span> <span class="pre">if</span> <span class="pre">no</span> <span class="pre">relationship</span> <span class="pre">is</span> <span class="pre">found</span> <span class="pre">that</span> <span class="pre">matches</span> <span class="pre">the</span> <span class="pre">allowed</span> <span class="pre">relation</span> <span class="pre">types.\n\n###</span> <span class="pre">Examples</span> <span class="pre">of</span> <span class="pre">Exclusions:\n-</span> <span class="pre">If</span> <span class="pre">`allowed_relationship_types`</span> <span class="pre">is</span> <span class="pre">`["employs",</span> <span class="pre">"friend"]`</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">text</span> <span class="pre">implies</span> <span class="pre">a</span> <span class="pre">"partner"</span> <span class="pre">relationship,\n</span>¬† <span class="pre">the</span> <span class="pre">entities</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">added,</span> <span class="pre">but</span> <span class="pre">the</span> <span class="pre">"partner"</span> <span class="pre">relationship</span> <span class="pre">must</span> <span class="pre">**NOT**</span> <span class="pre">be</span> <span class="pre">included.\n\n##</span> <span class="pre">Validation\nBefore</span> <span class="pre">producing</span> <span class="pre">the</span> <span class="pre">final</span> <span class="pre">output:\n1.</span> <span class="pre">Validate</span> <span class="pre">that</span> <span class="pre">all</span> <span class="pre">extracted</span> <span class="pre">entities</span> <span class="pre">have</span> <span class="pre">an</span> <span class="pre">`_id`</span> <span class="pre">and</span> <span class="pre">`type`.\n2.</span> <span class="pre">Validate</span> <span class="pre">that</span> <span class="pre">all</span> <span class="pre">`type`</span> <span class="pre">values</span> <span class="pre">are</span> <span class="pre">in</span> <span class="pre">{allowed_entity_types}.\n3.</span> <span class="pre">Validate</span> <span class="pre">that</span> <span class="pre">all</span> <span class="pre">relationships</span> <span class="pre">use</span> <span class="pre">keys</span> <span class="pre">in</span> <span class="pre">{allowed_relationship_types}.\n4.</span> <span class="pre">Exclude</span> <span class="pre">any</span> <span class="pre">entities</span> <span class="pre">or</span> <span class="pre">relationships</span> <span class="pre">failing</span> <span class="pre">validation.\n\n##</span> <span class="pre">Output</span> <span class="pre">Schema\nOutput</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">JSON</span> <span class="pre">document</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">single</span> <span class="pre">top-level</span> <span class="pre">key,</span> <span class="pre">`entities`,</span> <span class="pre">as</span> <span class="pre">an</span> <span class="pre">array</span> <span class="pre">of</span> <span class="pre">objects.\nEach</span> <span class="pre">object</span> <span class="pre">must</span> <span class="pre">conform</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">schema:\n{entity_schema}\n\n'),</span> <span class="pre">additional_kwargs={}),</span> <span class="pre">HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['input_document'],</span> <span class="pre">input_types={},</span> <span class="pre">partial_variables={},</span> <span class="pre">template='{input_document}'),</span> <span class="pre">additional_kwargs={})])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><span class="pre">ChatPromptTemplate</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">ChatPromptTemplate(input_variables=['allowed_entity_types',</span> <span class="pre">'input_document'],</span> <span class="pre">input_types={},</span> <span class="pre">partial_variables={},</span> <span class="pre">messages=[SystemMessagePromptTemplate(prompt=PromptTemplate(input_variables=['allowed_entity_types'],</span> <span class="pre">input_types={},</span> <span class="pre">partial_variables={},</span> <span class="pre">template='\nYou</span> <span class="pre">are</span> <span class="pre">a</span> <span class="pre">meticulous</span> <span class="pre">analyst</span> <span class="pre">tasked</span> <span class="pre">with</span> <span class="pre">extracting</span> <span class="pre">information</span> <span class="pre">from</span> <span class="pre">documents</span> <span class="pre">to</span> <span class="pre">form\nknowledge</span> <span class="pre">graphs</span> <span class="pre">of</span> <span class="pre">entities</span> <span class="pre">(nodes)</span> <span class="pre">and</span> <span class="pre">their</span> <span class="pre">relationships</span> <span class="pre">(edges).\n\nYou</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">provided</span> <span class="pre">a</span> <span class="pre">short</span> <span class="pre">document</span> <span class="pre">(query)</span> <span class="pre">from</span> <span class="pre">which</span> <span class="pre">you</span> <span class="pre">infer</span> <span class="pre">the</span> <span class="pre">entity</span> <span class="pre">names.\nYou</span> <span class="pre">need</span> <span class="pre">not</span> <span class="pre">think</span> <span class="pre">about</span> <span class="pre">relationships</span> <span class="pre">between</span> <span class="pre">the</span> <span class="pre">entities.</span> <span class="pre">You</span> <span class="pre">only</span> <span class="pre">need</span> <span class="pre">names.\n\nProvide</span> <span class="pre">your</span> <span class="pre">response</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">JSON</span> <span class="pre">Array</span> <span class="pre">of</span> <span class="pre">entity</span> <span class="pre">names\nor</span> <span class="pre">human-readable</span> <span class="pre">identifiers,</span> <span class="pre">found</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">text.\n\n**Allowed</span> <span class="pre">Entity</span> <span class="pre">Types**:\n-</span> <span class="pre">Extract</span> <span class="pre">ONLY</span> <span class="pre">entities</span> <span class="pre">whose</span> <span class="pre">`type`</span> <span class="pre">matches</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">following:</span> <span class="pre">{allowed_entity_types}.\n-</span> <span class="pre">NOTE:</span> <span class="pre">If</span> <span class="pre">this</span> <span class="pre">list</span> <span class="pre">is</span> <span class="pre">empty,</span> <span class="pre">ANY</span> <span class="pre">`type`</span> <span class="pre">is</span> <span class="pre">permitted.\n\n###</span> <span class="pre">Examples</span> <span class="pre">of</span> <span class="pre">Exclusions:\n-</span> <span class="pre">If</span> <span class="pre">`allowed_entity_types`</span> <span class="pre">is</span> <span class="pre">`["Person",</span> <span class="pre">"Organization"]`,</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">text</span> <span class="pre">mentions</span> <span class="pre">"Event"</span> <span class="pre">or</span> <span class="pre">"Location",\n</span>¬† <span class="pre">these</span> <span class="pre">entities</span> <span class="pre">must</span> <span class="pre">**NOT**</span> <span class="pre">be</span> <span class="pre">included</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">output.\n\n</span> <span class="pre">##</span> <span class="pre">Examples:\n</span> <span class="pre">Example</span> <span class="pre">1:</span> <span class="pre">`allowed_entity_types`</span> <span class="pre">is</span> <span class="pre">`[]`\n</span>¬†¬†¬† <span class="pre">input:</span> <span class="pre">"John</span> <span class="pre">Doe</span> <span class="pre">works</span> <span class="pre">at</span> <span class="pre">ACME</span> <span class="pre">in</span> <span class="pre">New</span> <span class="pre">York"\n</span>¬†¬†¬† <span class="pre">output:</span> <span class="pre">["John</span> <span class="pre">Doe",</span> <span class="pre">"ACME",</span> <span class="pre">"New</span> <span class="pre">York"]\n\n</span> <span class="pre">In</span> <span class="pre">this</span> <span class="pre">example,</span> <span class="pre">you</span> <span class="pre">would</span> <span class="pre">identify</span> <span class="pre">3</span> <span class="pre">entities:\n</span> <span class="pre">John</span> <span class="pre">Doe</span> <span class="pre">of</span> <span class="pre">type</span> <span class="pre">person;</span> <span class="pre">ACME</span> <span class="pre">of</span> <span class="pre">type</span> <span class="pre">organization;</span> <span class="pre">New</span> <span class="pre">York</span> <span class="pre">of</span> <span class="pre">type</span> <span class="pre">place.\n\nExample</span> <span class="pre">2:</span> <span class="pre">`allowed_entity_types`</span> <span class="pre">is</span> <span class="pre">`[organization,</span> <span class="pre">place]`\n</span>¬†¬†¬† <span class="pre">input:</span> <span class="pre">"John</span> <span class="pre">Doe</span> <span class="pre">works</span> <span class="pre">at</span> <span class="pre">ACME</span> <span class="pre">in</span> <span class="pre">New</span> <span class="pre">York"\n</span>¬†¬†¬† <span class="pre">output:</span> <span class="pre">["ACME",</span> <span class="pre">"New</span> <span class="pre">York"]\n\n</span> <span class="pre">In</span> <span class="pre">this</span> <span class="pre">example,</span> <span class="pre">you</span> <span class="pre">would</span> <span class="pre">identify</span> <span class="pre">only</span> <span class="pre">2</span> <span class="pre">entities:\n</span> <span class="pre">ACME</span> <span class="pre">of</span> <span class="pre">type</span> <span class="pre">organization;</span> <span class="pre">New</span> <span class="pre">York</span> <span class="pre">of</span> <span class="pre">type</span> <span class="pre">place.\n</span> <span class="pre">John</span> <span class="pre">Doe,</span> <span class="pre">of</span> <span class="pre">type</span> <span class="pre">person,</span> <span class="pre">would</span> <span class="pre">be</span> <span class="pre">excluded.\n\n</span> <span class="pre">2.</span> <span class="pre">input:</span> <span class="pre">"In</span> <span class="pre">what</span> <span class="pre">continent</span> <span class="pre">is</span> <span class="pre">Brazil?\n</span>¬†¬†¬† <span class="pre">output:</span> <span class="pre">["Brazil"]\n\nThis</span> <span class="pre">example</span> <span class="pre">is</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">form</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">question.</span> <span class="pre">There</span> <span class="pre">is</span> <span class="pre">one</span> <span class="pre">entity,\n\n3.</span> <span class="pre">input:</span> <span class="pre">"For</span> <span class="pre">legal</span> <span class="pre">and</span> <span class="pre">operational</span> <span class="pre">purposes,</span> <span class="pre">many</span> <span class="pre">governments</span> <span class="pre">and</span> <span class="pre">organizations</span> <span class="pre">adopt</span> <span class="pre">specific</span> <span class="pre">definitions."\n</span>¬†¬† <span class="pre">output:</span> <span class="pre">[]\n\nIn</span> <span class="pre">the</span> <span class="pre">final</span> <span class="pre">example,</span> <span class="pre">there</span> <span class="pre">are</span> <span class="pre">no</span> <span class="pre">entities.\nThough</span> <span class="pre">there</span> <span class="pre">are</span> <span class="pre">concepts</span> <span class="pre">and</span> <span class="pre">nouns</span> <span class="pre">that</span> <span class="pre">might</span> <span class="pre">be</span> <span class="pre">types</span> <span class="pre">or</span> <span class="pre">attributes</span> <span class="pre">of</span> <span class="pre">entities,\nthere</span> <span class="pre">is</span> <span class="pre">nothing</span> <span class="pre">here</span> <span class="pre">that</span> <span class="pre">could</span> <span class="pre">be</span> <span class="pre">seen</span> <span class="pre">as</span> <span class="pre">being</span> <span class="pre">a</span> <span class="pre">unique</span> <span class="pre">identifier</span> <span class="pre">or</span> <span class="pre">name.\n'),</span> <span class="pre">additional_kwargs={}),</span> <span class="pre">HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['input_document'],</span> <span class="pre">input_types={},</span> <span class="pre">partial_variables={},</span> <span class="pre">template='{input_document}'),</span> <span class="pre">additional_kwargs={})])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_entity_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_relationship_types</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entity_name_examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'warn'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore"><span class="pre">MongoDBGraphStore</span></a></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.from_connection_string"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.from_connection_string" title="Link to this definition">#</a></dt>
<dd><p>Construct a <cite>MongoDB KnowLedge Graph for RAG</cite>
from a MongoDB connection URI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_string</strong> (<em>str</em>) ‚Äì A valid MongoDB connection URI.</p></li>
<li><p><strong>database_name</strong> (<em>str</em>) ‚Äì The name of the database to connect to.</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) ‚Äì The name of the collection to connect to.</p></li>
<li><p><strong>entity_extraction_model</strong> (<a class="reference internal" href="../../core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel" title="langchain_core.language_models.chat_models.BaseChatModel"><em>BaseChatModel</em></a>) ‚Äì LLM for converting documents into Graph of Entities and Relationships.</p></li>
<li><p><strong>entity_prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Prompt to fill graph store with entities following schema.</p></li>
<li><p><strong>query_prompt</strong> (<a class="reference internal" href="../../core/prompts/langchain_core.prompts.chat.ChatPromptTemplate.html#langchain_core.prompts.chat.ChatPromptTemplate" title="langchain_core.prompts.chat.ChatPromptTemplate"><em>ChatPromptTemplate</em></a>) ‚Äì Prompt extracts entities and relationships as search starting points.</p></li>
<li><p><strong>max_depth</strong> (<em>int</em>) ‚Äì Maximum recursion depth in graph traversal.</p></li>
<li><p><strong>allowed_entity_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì If provided, constrains search to these types.</p></li>
<li><p><strong>allowed_relationship_types</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì If provided, constrains search to these types.</p></li>
<li><p><strong>entity_examples</strong> (<em>str</em>) ‚Äì A string containing any number of additional examples to provide as context for entity extraction.</p></li>
<li><p><strong>entity_name_examples</strong> (<em>str</em>) ‚Äì A string appended to prompts.NAME_EXTRACTION_INSTRUCTIONS containing examples.</p></li>
<li><p><strong>validate</strong> (<em>bool</em>) ‚Äì If True, entity schema will be validated on every insert or update.</p></li>
<li><p><strong>validation_action</strong> (<em>str</em>) ‚Äì One of {‚Äúwarn‚Äù, ‚Äúerror‚Äù}.
- If ‚Äúwarn‚Äù, the default, documents will be inserted but errors logged.
- If ‚Äúerror‚Äù, an exception will be raised if any document does not match the schema.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new MongoDBGraphStore instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore" title="langchain_mongodb.graphrag.graph.MongoDBGraphStore"><em>MongoDBGraphStore</em></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.related_entities">
<span class="sig-name descname"><span class="pre">related_entities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">starting_entities</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Entity</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.related_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.related_entities" title="Link to this definition">#</a></dt>
<dd><p>Traverse Graph along relationship edges to find connected entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>starting_entities</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) ‚Äì Traversal begins with documents whose _id fields match these strings.</p></li>
<li><p><strong>max_depth</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em>) ‚Äì Recursion continues until no more matching documents are found,
or until the operation reaches a recursion depth specified by this parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of connected entities.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Entity]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mongodb.graphrag.graph.MongoDBGraphStore.similarity_search">
<span class="sig-name descname"><span class="pre">similarity_search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">‚Üí</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Entity</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_mongodb/graphrag/graph.html#MongoDBGraphStore.similarity_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.similarity_search" title="Link to this definition">#</a></dt>
<dd><p>Retrieve list of connected Entities found via traversal of KnowledgeGraph.</p>
<ol class="arabic simple">
<li><p>Use LLM &amp; Prompt to find entities within the input_document itself.</p></li>
<li><p>Find Entity Nodes that match those found in the input_document.</p></li>
<li><p>Traverse the graph using these as starting points.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_document</strong> (<em>str</em>) ‚Äì String to find relevant documents for.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of connected Entity dictionaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Entity]</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<ul class="simple">
</ul>
</section>
</article>
</div>
<dialog id="pst-secondary-sidebar-modal"></dialog>
<div class="bd-sidebar-secondary bd-toc" id="pst-secondary-sidebar"><div class="sidebar-secondary-items sidebar-secondary__inner">
<div class="sidebar-secondary-item">
<div class="page-toc tocsection onthispage" id="pst-page-navigation-heading-2">
<i class="fa-solid fa-list"></i> On this page
  </div>
<nav aria-labelledby="pst-page-navigation-heading-2" class="bd-toc-nav page-toc">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore"><code class="docutils literal notranslate"><span class="pre">MongoDBGraphStore</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.add_documents"><code class="docutils literal notranslate"><span class="pre">add_documents()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.chat_response"><code class="docutils literal notranslate"><span class="pre">chat_response()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entities"><code class="docutils literal notranslate"><span class="pre">extract_entities()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.extract_entity_names"><code class="docutils literal notranslate"><span class="pre">extract_entity_names()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.find_entity_by_name"><code class="docutils literal notranslate"><span class="pre">find_entity_by_name()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.from_connection_string"><code class="docutils literal notranslate"><span class="pre">from_connection_string()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.related_entities"><code class="docutils literal notranslate"><span class="pre">related_entities()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_mongodb.graphrag.graph.MongoDBGraphStore.similarity_search"><code class="docutils literal notranslate"><span class="pre">similarity_search()</span></code></a></li>
</ul>
</li>
</ul>
</nav></div>
</div></div>
</div>
<footer class="bd-footer-content">
</footer>
</main>
</div>
</div>
<!-- Scripts loaded after <body> so the DOM is not blocked -->
<script defer="" src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer="" src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>
<footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
<div class="footer-items__start">
<div class="footer-item">
<p class="copyright">
    
      ¬© Copyright 2023, LangChain Inc.
      <br/>
</p>
</div>
</div>
</div>
</footer>
</body>
</html>